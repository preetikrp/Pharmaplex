<!DOCTYPE html>
<html>

<head>
    <title>Pharmaplex</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./lib/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body ng-app="myApp">
    <div ng-include="'partials/navbar.html'"></div>
    <div ng-include="'partials/searchPage.html'"></div>
    <div ng-view></div>
    <!-- third Party JS -->
    <script type="text/javascript" src="./lib/node_modules/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="./lib/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./lib/node_modules/angular/angular.js"></script>
    <script type="text/javascript" src="./lib/node_modules/angular-route/angular-route.min.js"></script>
    <script type="text/javascript" src="./lib/node_modules/firebase/firebase.js"></script>
    <script type="text/javascript" src="./lib/node_modules/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="./app/hmac-sha256.js"></script>
    <script type="text/javascript" src="./app/enc-base64-min.js"></script>-->
    <script type="text/javascript" src="./app/app.js"></script>
    <script type="text/javascript" src="./app/value/fbcreds.js"></script>
    <script type="text/javascript" src="./app/factory/authFactory.js"></script>
    <script type="text/javascript" src="./app/factory/dataFactory.js"></script>
    <script type="text/javascript" src="./app/factory/searchFactory.js"></script>
    <script type="text/javascript" src="./app/controllers/authCtrl.js"></script>
    <script type="text/javascript" src="./app/controllers/myCtrl.js"></script>
    <script type="text/javascript" src="./app/controllers/profileFormCtrl.js"></script>
    <script type="text/javascript" src="./app/controllers/navCtrl.js"></script>
    <!--<div ng-include="'partials/navbar.html'"></div>-->
    <script>

    app.controller('navCtrl', function($scope, AuthFactory, $window, SearchTermData) {

        // Log Button Function

        $scope.isLoggedIn = false;
        $scope.searchText = SearchTermData;

        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                $scope.isLoggedIn = true;
                console.log("currentUser logged in", user, $scope.isLoggedIn);
                $scope.$apply();
            } else {
                $scope.isLoggedIn = false;
                console.log("currentUser logged in", $scope.isLoggedIn);
                $window.location.href = "#!/login";
            }
        });

    });

    ////////////////////////////////
    </script>
</body>

</html>
